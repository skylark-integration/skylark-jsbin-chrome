{"version":3,"sources":["prettyDate.js"],"names":["define","$","store","jsbin","chrome","prettyDate","time","date","Date","replace","diff","getTime","dayDiff","Math","floor","isNaN","mon","getMonth","day","getDate","year","getFullYear","shortDate","fn","this","each","getAttribute","text"],"mappings":";;;;;;;AAAAA,QACE,iBACA,6BACC,UACA,YACD,SAAUC,EAAEC,EAAMC,EAAMC,GAExB,SAASC,EAAWC,GAClB,aAMA,IAAIC,EAAO,IAAIC,MAAMF,GAAQ,IAAIG,QAAQ,IAAK,SAASA,QAAQ,KAAK,KAAKA,QAAQ,QAAQ,MACvFC,IAAS,IAAKF,MAAQG,UAAYJ,EAAKI,WAAa,IACpDC,EAAUC,KAAKC,MAAMJ,EAAO,OAE9B,KAAKK,MAAMH,IAAYA,EAAU,GAIjC,OAAmB,IAAZA,KACHF,EAAO,GAAM,WACbA,EAAO,KAAO,iBACdA,EAAO,MAAQG,KAAKC,MAAOJ,EAAO,IAAO,gBACzCA,EAAO,MAAQ,cACfA,EAAO,OAASG,KAAKC,MAAOJ,EAAO,MAAS,eAKlD,SAAmBJ,GAEjB,IACIC,EAAO,IAAIC,KAAKF,GAChBU,GAFa,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAE1ET,EAAKU,YACrBC,EAAMX,EAAKY,UAAU,GACrBC,EAAOb,EAAKc,cAGhB,OAFe,IAAKb,MAAQa,gBAEXD,EACRF,EAAM,IAAMF,EAEZE,EAAM,IAAMF,EAAM,IAAMI,EAhB7BE,CAAUf,EAAKI,WA+BrB,OAZAV,EAAEsB,GAAGlB,WAAa,WACd,aAEA,OAAOmB,KAAKC,KAAK,WACf,IAAIlB,EAAOF,EAAWmB,KAAKE,aAAa,YACnCnB,GACHN,EAAEuB,MAAMG,KAAMpB,MAMfH,EAAOC,WAAaA","file":"../prettyDate.js","sourcesContent":["define([\r\n  \"skylark-jquery\",\r\n  \"skylark-jsbin-base/storage\",\r\n   \"./jsbin\",\r\n   \"./chrome\"\r\n],function ($,store,jsbin,chrome) {\r\n\r\n  function prettyDate(time){\r\n    'use strict';\r\n\r\n\r\n    // Remy Sharp edit: July 13, 2014 specific to JS Bin\r\n    // Need to replace Z in ISO8601 timestamp with +0000 so prettyDate() doesn't\r\n    // completely remove it (and parse the date using the local timezone).\r\n    var date = new Date((time || '').replace('Z', '+0000').replace(/-/g,'/').replace(/[TZ]/g,' ')),\r\n      diff = (((new Date()).getTime() - date.getTime()) / 1000),\r\n      dayDiff = Math.floor(diff / 86400);\r\n\r\n    if ( isNaN(dayDiff) || dayDiff < 0 ) {\r\n      return;\r\n    }\r\n\r\n    return dayDiff === 0 && (\r\n        diff < 60 && 'just now' ||\r\n        diff < 120 && '1 minute ago' ||\r\n        diff < 3600 && Math.floor( diff / 60 ) + ' minutes ago' ||\r\n        diff < 7200 && '1 hour ago' ||\r\n        diff < 86400 && Math.floor( diff / 3600 ) + ' hours ago') ||\r\n        shortDate(date.getTime());\r\n  }\r\n\r\n\r\n  function shortDate(time) {\r\n    'use strict';\r\n    var monthDict = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n    var date = new Date(time),\r\n        mon = monthDict[date.getMonth()],\r\n        day = date.getDate()+'',\r\n        year = date.getFullYear(),\r\n        thisyear = (new Date()).getFullYear();\r\n\r\n    if (thisyear === year) {\r\n      return day + ' ' + mon;\r\n    } else {\r\n      return day + ' ' + mon + ' ' + year;\r\n    }\r\n  }\r\n  $.fn.prettyDate = function(){\r\n      'use strict';\r\n      /* global $*/\r\n      return this.each(function(){\r\n        var date = prettyDate(this.getAttribute('pubdate'));\r\n        if ( date ) {\r\n          $(this).text( date );\r\n        }\r\n      });\r\n  };\r\n  \r\n\r\n  return chrome.prettyDate = prettyDate;\r\n});"]}
{"version":3,"sources":["skylark-jsbin-chrome.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../skylark-jsbin-chrome.js","sourcesContent":["define('skylark-jsbin-chrome/jsbin',[\r\n\t\"skylark-jsbin-base/jsbin\"\r\n],function(jsbin){\r\n\treturn jsbin;\r\n});\ndefine('skylark-jsbin-chrome/chrome',[\r\n\t\"./jsbin\"\r\n],function(jsbin){\r\n\treturn jsbin.chrome = {};\r\n});\ndefine('skylark-jsbin-chrome/analytics',[\r\n  \"skylark-jquery\",\r\n   \"./chrome\"\r\n],function ($,chrome) {\r\n  var analytics =  {\r\n    track: function (category, action, label) { // , value\r\n      window.ga && ga('send', 'event', category, action, label);\r\n    },\r\n    experiment: function (type) {\r\n      analytics.track('experiment', type);\r\n    },\r\n    openMenu: function (label) {\r\n      analytics.track('menu', 'open', label);\r\n    },\r\n    closeMenu: function (label) {\r\n      analytics.track('menu', 'close', label);\r\n    },\r\n    selectMenu: function (item) {\r\n      if (item) {\r\n        analytics.track('menu', 'select', item);\r\n      }\r\n    },\r\n  };\r\n\r\n  return chrome.analytics = analytics;\r\n});\ndefine('skylark-jsbin-chrome/dropdowns',[\r\n  \"skylark-jquery\",\r\n   \"./jsbin\",\r\n   \"./chrome\",\r\n   \"./analytics\"\r\n],function ($,jsbin,chrome,analytics) {\r\n  //moved from chrome/navigation.js\r\n\r\n  var \r\n      //dropdownOpen = false,\r\n      onhover = false,\r\n      menuDown = false;\r\n\r\n  function opendropdown(el, nofocus) {\r\n    var menu;\r\n    if (!jsbin.dropdownOpen) {\r\n      menu = $(el).closest('.menu').addClass('open').trigger('open');\r\n      // $body.addClass('menuinfo');\r\n      analytics.openMenu(el.hash.substring(1));\r\n      var input = menu.find(':text:visible:first');\r\n\r\n      if (input.length && !jsbin.mobile) {\r\n        input.focus();\r\n        setTimeout(function () {\r\n          input[0].select();\r\n        }, 0);\r\n      }\r\n      jsbin.dropdownOpen = el;\r\n    }\r\n  }\r\n\r\n  function closedropdown() {\r\n    menuDown = false;\r\n    if (jsbin.dropdownOpen) {\r\n      dropdownButtons.closest('.menu').removeClass('open').trigger('close');\r\n      // $body.removeClass('menuinfo');\r\n      jsbin.dropdownOpen = false;\r\n      onhover = false;\r\n      var f = jsbin.panels.focused; // TODO\r\n      if (f && !jsbin.mobile) {\r\n        f.focus();\r\n        if (f.editor) {\r\n          f.editor.focus();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  var dropdownButtons = $('.button-dropdown, .button-open').mousedown(function (e) {\r\n    $dropdownLinks.removeClass('hover');\r\n    if (jsbin.dropdownOpen && jsbin.dropdownOpen !== this) {\r\n      closedropdown();\r\n    }\r\n    if (!jsbin.dropdownOpen) {\r\n      menuDown = true;\r\n      opendropdown(this);\r\n    }\r\n    e.preventDefault();\r\n    return false;\r\n  }).mouseup(function () {\r\n    if (menuDown) return false;\r\n  }).click(function () {\r\n    if (!menuDown) {\r\n      analytics.closeMenu(this.hash.substring(1));\r\n      closedropdown();\r\n    }\r\n    if (menuDown) {\r\n      $(this.hash).attr('tabindex', 0);\r\n      menuDown = false;\r\n      return jsbin.mobile;\r\n    }\r\n\r\n    menuDown = false;\r\n\r\n    $(this.hash).attr('tabindex', -1);\r\n    return false;\r\n  });\r\n\r\n  $('#actionmenu').click(function () {\r\n    jsbin.dropdownOpen = true;\r\n  });\r\n\r\n  var ignoreUp = false;\r\n  jsbin.$body.bind('mousedown', function (event) {\r\n    if (jsbin.dropdownOpen) {\r\n      if ($(event.target).closest('.menu').length) {\r\n        ignoreUp = true;\r\n      }\r\n    }\r\n  }).bind('click mouseup', function (event) {\r\n    if (jsbin.dropdownOpen && !ignoreUp) {\r\n      if (!$(event.target).closest('.menu').length) {\r\n        closedropdown();\r\n        return false;\r\n      }\r\n    }\r\n    ignoreUp = false;\r\n  });\r\n\r\n  var fromClick = false;\r\n  var $dropdownLinks = $('.dropdownmenu a, .dropdownmenu .button').mouseup(function (e) {\r\n    if (e.target.nodeName === 'INPUT') {\r\n      return;\r\n    }\r\n\r\n    setTimeout(closedropdown, 0);\r\n    analytics.selectMenu(this.getAttribute('data-label') || this.hash.substring(1) || this.href);\r\n    if (!fromClick) {\r\n      if (this.hostname === window.location.hostname) {\r\n        if ($(this).triggerHandler('click') !== false) {\r\n          window.location = this.href;\r\n        }\r\n      } else {\r\n        if (this.getAttribute('target')) {\r\n          window.open(this.href);\r\n        } else {\r\n          window.location = this.href;\r\n        }\r\n      }\r\n    }\r\n    fromClick = false;\r\n  }).mouseover(function () {\r\n    $dropdownLinks.removeClass('hover');\r\n    $(this).addClass('hover');\r\n  }).mousedown(function (e) {\r\n    if (e.target.nodeName === 'INPUT') {\r\n      return;\r\n    }\r\n    fromClick = true;\r\n  });\r\n\r\n\r\n  return chrome.dropdowns = {\r\n    opendropdown,\r\n    closedropdown\r\n  }\r\n});\ndefine('skylark-jsbin-chrome/hideOpen',[\r\n\t\"./chrome\",\r\n  \"./dropdowns\"\r\n],function(jsbin,dropdowns){\r\n  //moved from chrome/esc.js\r\n  function hideOpen() {\r\n    if (jsbin.infocardVisible) {\r\n      $('#infocard').removeClass('open');\r\n     jsbin.infocardVisible = false;\r\n    }\r\n    if (jsbin.sideNavVisible) {\r\n      $body.removeClass('show-nav');\r\n      jsbin.sideNavVisible = false;\r\n    }\r\n    if (jsbin.urlHelpVisible) {\r\n      jsbin.$body.removeClass('urlHelp');\r\n      jsbin.urlHelpVisible = false;\r\n      analytics.closeMenu('help');\r\n    } else if (jsbin.keyboardHelpVisible) {\r\n      jsbin.$body.removeClass('keyboardHelp');\r\n      jsbin.keyboardHelpVisible = false;\r\n      analytics.closeMenu('keyboardHelp');\r\n    } else if (jsbin.dropdownOpen) {\r\n      dropdowns.closedropdown();\r\n    } else if (jsbin.loginVisible) {\r\n      $('#login').hide();\r\n      analytics.closeMenu('login');\r\n      jsbin.loginVisible = false;\r\n    }\r\n  }\r\n  return chrome.hideOpen = hideOpen;\r\n});\ndefine('skylark-jsbin-chrome/main',[\r\n\t\"./chrome\",\r\n\t\"./analytics\",\r\n\t\"./dropdowns\",\r\n\t\"./hideOpen\"\r\n],function(chrome){\r\n\treturn chrome;\r\n});\ndefine('skylark-jsbin-chrome', ['skylark-jsbin-chrome/main'], function (main) { return main; });\n\n"]}
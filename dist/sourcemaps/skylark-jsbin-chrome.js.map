{"version":3,"sources":["skylark-jsbin-chrome.js"],"names":["define","jsbin","chrome","$","analytics","track","category","action","label","window","ga","experiment","type","openMenu","closeMenu","selectMenu","item","dropdownOpen","menuDown","opendropdown","el","nofocus","menu","closest","addClass","trigger","hash","substring","input","find","length","mobile","focus","setTimeout","select","closedropdown","dropdownButtons","removeClass","f","panels","focused","editor","mousedown","e","$dropdownLinks","this","preventDefault","mouseup","click","attr","ignoreUp","$body","bind","event","target","fromClick","nodeName","getAttribute","href","hostname","location","triggerHandler","open","mouseover","dropdowns","hideOpen","infocardVisible","sideNavVisible","urlHelpVisible","keyboardHelpVisible","loginVisible","hide","main"],"mappings":"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","file":"../skylark-jsbin-chrome.js","sourcesContent":["define('skylark-jsbin-chrome/jsbin',[\r\n\t\"skylark-jsbin-base/jsbin\"\r\n],function(jsbin){\r\n\treturn jsbin;\r\n});\ndefine('skylark-jsbin-chrome/chrome',[\r\n\t\"./jsbin\"\r\n],function(jsbin){\r\n\treturn jsbin.chrome = {};\r\n});\ndefine('skylark-jsbin-chrome/analytics',[\r\n  \"skylark-jquery\",\r\n   \"./chrome\"\r\n],function ($,chrome) {\r\n  var analytics =  {\r\n    track: function (category, action, label) { // , value\r\n      window.ga && ga('send', 'event', category, action, label);\r\n    },\r\n    experiment: function (type) {\r\n      analytics.track('experiment', type);\r\n    },\r\n    openMenu: function (label) {\r\n      analytics.track('menu', 'open', label);\r\n    },\r\n    closeMenu: function (label) {\r\n      analytics.track('menu', 'close', label);\r\n    },\r\n    selectMenu: function (item) {\r\n      if (item) {\r\n        analytics.track('menu', 'select', item);\r\n      }\r\n    },\r\n  };\r\n\r\n  return chrome.analytics = analytics;\r\n});\ndefine('skylark-jsbin-chrome/dropdowns',[\r\n  \"skylark-jquery\",\r\n   \"./jsbin\",\r\n   \"./chrome\",\r\n   \"./analytics\"\r\n],function ($,jsbin,chrome,analytics) {\r\n  //moved from chrome/navigation.js\r\n\r\n  var dropdownOpen = false,\r\n      onhover = false,\r\n      menuDown = false;\r\n\r\n  function opendropdown(el, nofocus) {\r\n    var menu;\r\n    if (!dropdownOpen) {\r\n      menu = $(el).closest('.menu').addClass('open').trigger('open');\r\n      // $body.addClass('menuinfo');\r\n      analytics.openMenu(el.hash.substring(1));\r\n      var input = menu.find(':text:visible:first');\r\n\r\n      if (input.length && !jsbin.mobile) {\r\n        input.focus();\r\n        setTimeout(function () {\r\n          input[0].select();\r\n        }, 0);\r\n      }\r\n      dropdownOpen = el;\r\n    }\r\n  }\r\n\r\n  function closedropdown() {\r\n    menuDown = false;\r\n    if (dropdownOpen) {\r\n      dropdownButtons.closest('.menu').removeClass('open').trigger('close');\r\n      // $body.removeClass('menuinfo');\r\n      dropdownOpen = false;\r\n      onhover = false;\r\n      var f = jsbin.panels.focused; // TODO\r\n      if (f && !jsbin.mobile) {\r\n        f.focus();\r\n        if (f.editor) {\r\n          f.editor.focus();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  var dropdownButtons = $('.button-dropdown, .button-open').mousedown(function (e) {\r\n    $dropdownLinks.removeClass('hover');\r\n    if (dropdownOpen && dropdownOpen !== this) {\r\n      closedropdown();\r\n    }\r\n    if (!dropdownOpen) {\r\n      menuDown = true;\r\n      opendropdown(this);\r\n    }\r\n    e.preventDefault();\r\n    return false;\r\n  }).mouseup(function () {\r\n    if (menuDown) return false;\r\n  }).click(function () {\r\n    if (!menuDown) {\r\n      analytics.closeMenu(this.hash.substring(1));\r\n      closedropdown();\r\n    }\r\n    if (menuDown) {\r\n      $(this.hash).attr('tabindex', 0);\r\n      menuDown = false;\r\n      return jsbin.mobile;\r\n    }\r\n\r\n    menuDown = false;\r\n\r\n    $(this.hash).attr('tabindex', -1);\r\n    return false;\r\n  });\r\n\r\n  $('#actionmenu').click(function () {\r\n    dropdownOpen = true;\r\n  });\r\n\r\n  var ignoreUp = false;\r\n  jsbin.$body.bind('mousedown', function (event) {\r\n    if (dropdownOpen) {\r\n      if ($(event.target).closest('.menu').length) {\r\n        ignoreUp = true;\r\n      }\r\n    }\r\n  }).bind('click mouseup', function (event) {\r\n    if (dropdownOpen && !ignoreUp) {\r\n      if (!$(event.target).closest('.menu').length) {\r\n        closedropdown();\r\n        return false;\r\n      }\r\n    }\r\n    ignoreUp = false;\r\n  });\r\n\r\n  var fromClick = false;\r\n  var $dropdownLinks = $('.dropdownmenu a, .dropdownmenu .button').mouseup(function (e) {\r\n    if (e.target.nodeName === 'INPUT') {\r\n      return;\r\n    }\r\n\r\n    setTimeout(closedropdown, 0);\r\n    analytics.selectMenu(this.getAttribute('data-label') || this.hash.substring(1) || this.href);\r\n    if (!fromClick) {\r\n      if (this.hostname === window.location.hostname) {\r\n        if ($(this).triggerHandler('click') !== false) {\r\n          window.location = this.href;\r\n        }\r\n      } else {\r\n        if (this.getAttribute('target')) {\r\n          window.open(this.href);\r\n        } else {\r\n          window.location = this.href;\r\n        }\r\n      }\r\n    }\r\n    fromClick = false;\r\n  }).mouseover(function () {\r\n    $dropdownLinks.removeClass('hover');\r\n    $(this).addClass('hover');\r\n  }).mousedown(function (e) {\r\n    if (e.target.nodeName === 'INPUT') {\r\n      return;\r\n    }\r\n    fromClick = true;\r\n  });\r\n\r\n\r\n  return chrome.dropdowns = {\r\n    opendropdown,\r\n    closedropdown\r\n  }\r\n});\ndefine('skylark-jsbin-chrome/hideOpen',[\r\n\t\"./chrome\",\r\n  \"./dropdowns\"\r\n],function(jsbin,dropdowns){\r\n  //moved from chrome/esc.js\r\n  function hideOpen() {\r\n    if (jsbin.infocardVisible) {\r\n      $('#infocard').removeClass('open');\r\n     jsbin.infocardVisible = false;\r\n    }\r\n    if (jsbin.sideNavVisible) {\r\n      $body.removeClass('show-nav');\r\n      jsbin.sideNavVisible = false;\r\n    }\r\n    if (jsbin.urlHelpVisible) {\r\n      jsbin.$body.removeClass('urlHelp');\r\n      jsbin.urlHelpVisible = false;\r\n      analytics.closeMenu('help');\r\n    } else if (jsbin.keyboardHelpVisible) {\r\n      jsbin.$body.removeClass('keyboardHelp');\r\n      jsbin.keyboardHelpVisible = false;\r\n      analytics.closeMenu('keyboardHelp');\r\n    } else if (jsbin.dropdownOpen) {\r\n      dropdowns.closedropdown();\r\n    } else if (jsbin.loginVisible) {\r\n      $('#login').hide();\r\n      analytics.closeMenu('login');\r\n      jsbin.loginVisible = false;\r\n    }\r\n  }\r\n  return chrome.hideOpen = hideOpen;\r\n});\ndefine('skylark-jsbin-chrome/main',[\r\n\t\"./chrome\",\r\n\t\"./analytics\",\r\n\t\"./dropdowns\",\r\n\t\"./hideOpen\"\r\n],function(chrome){\r\n\treturn chrome;\r\n});\ndefine('skylark-jsbin-chrome', ['skylark-jsbin-chrome/main'], function (main) { return main; });\n\n"]}
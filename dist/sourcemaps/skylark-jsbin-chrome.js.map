{"version":3,"sources":["skylark-jsbin-chrome.js"],"names":["define","jsbin","chrome","$","analytics","track","category","action","label","window","ga","experiment","type","openMenu","closeMenu","selectMenu","item","dropdownButtons","menuDown","opendropdown","el","nofocus","menu","dropdownOpen","closest","addClass","trigger","hash","substring","input","find","length","mobile","focus","setTimeout","select","closedropdown","removeClass","dropdowns","load","mousedown","e","$dropdownLinks","this","preventDefault","mouseup","click","attr","ignoreUp","$body","bind","event","target","fromClick","nodeName","getAttribute","href","hostname","location","triggerHandler","open","mouseover","hideOpen","infocardVisible","sideNavVisible","urlHelpVisible","keyboardHelpVisible","loginVisible","hide","main"],"mappings":"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","file":"../skylark-jsbin-chrome.js","sourcesContent":["define('skylark-jsbin-chrome/jsbin',[\r\n\t\"skylark-jsbin-base/jsbin\"\r\n],function(jsbin){\r\n\treturn jsbin;\r\n});\ndefine('skylark-jsbin-chrome/chrome',[\r\n\t\"./jsbin\"\r\n],function(jsbin){\r\n\treturn jsbin.chrome = {};\r\n});\ndefine('skylark-jsbin-chrome/analytics',[\r\n  \"skylark-jquery\",\r\n   \"./chrome\"\r\n],function ($,chrome) {\r\n  var analytics =  {\r\n    track: function (category, action, label) { // , value\r\n      window.ga && ga('send', 'event', category, action, label);\r\n    },\r\n    experiment: function (type) {\r\n      analytics.track('experiment', type);\r\n    },\r\n    openMenu: function (label) {\r\n      analytics.track('menu', 'open', label);\r\n    },\r\n    closeMenu: function (label) {\r\n      analytics.track('menu', 'close', label);\r\n    },\r\n    selectMenu: function (item) {\r\n      if (item) {\r\n        analytics.track('menu', 'select', item);\r\n      }\r\n    },\r\n  };\r\n\r\n  return chrome.analytics = analytics;\r\n});\ndefine('skylark-jsbin-chrome/dropdowns',[\r\n  \"skylark-jquery\",\r\n   \"./jsbin\",\r\n   \"./chrome\",\r\n   \"./analytics\"\r\n],function ($,jsbin,chrome,analytics) {\r\n  //moved from chrome/navigation.js\r\n\r\n  var \r\n      //dropdownOpen = false,\r\n      onhover = false,\r\n      menuDown = false,\r\n      dropdownButtons;\r\n\r\n  function opendropdown(el, nofocus) {\r\n    var menu;\r\n    if (!jsbin.dropdownOpen) {\r\n      menu = $(el).closest('.menu').addClass('open').trigger('open');\r\n      // $body.addClass('menuinfo');\r\n      analytics.openMenu(el.hash.substring(1));\r\n      var input = menu.find(':text:visible:first');\r\n\r\n      if (input.length && !jsbin.mobile) {\r\n        input.focus();\r\n        setTimeout(function () {\r\n          input[0].select();\r\n        }, 0);\r\n      }\r\n      jsbin.dropdownOpen = el;\r\n    }\r\n  }\r\n\r\n  function closedropdown() {\r\n    menuDown = false;\r\n    if (jsbin.dropdownOpen) {\r\n      dropdownButtons.closest('.menu').removeClass('open').trigger('close');\r\n      // $body.removeClass('menuinfo');\r\n      jsbin.dropdownOpen = false;\r\n      onhover = false;\r\n      /*\r\n      var f = jsbin.panels.focused; // TODO\r\n      if (f && !jsbin.mobile) {\r\n        f.focus();\r\n        if (f.editor) {\r\n          f.editor.focus();\r\n        }\r\n      }\r\n      */\r\n    }\r\n  }\r\n\r\n  function load() {\r\n    dropdownButtons = $('.button-dropdown, .button-open').mousedown(function (e) {\r\n      $dropdownLinks.removeClass('hover');\r\n      if (jsbin.dropdownOpen && jsbin.dropdownOpen !== this) {\r\n        closedropdown();\r\n      }\r\n      if (!jsbin.dropdownOpen) {\r\n        menuDown = true;\r\n        opendropdown(this);\r\n      }\r\n      e.preventDefault();\r\n      return false;\r\n    }).mouseup(function () {\r\n      if (menuDown) return false;\r\n    }).click(function () {\r\n      if (!menuDown) {\r\n        analytics.closeMenu(this.hash.substring(1));\r\n        closedropdown();\r\n      }\r\n      if (menuDown) {\r\n        $(this.hash).attr('tabindex', 0);\r\n        menuDown = false;\r\n        return jsbin.mobile;\r\n      }\r\n\r\n      menuDown = false;\r\n\r\n      $(this.hash).attr('tabindex', -1);\r\n      return false;\r\n    });\r\n\r\n    $('#actionmenu').click(function () {\r\n      jsbin.dropdownOpen = true;\r\n    });\r\n\r\n    var ignoreUp = false;\r\n    jsbin.$body.bind('mousedown', function (event) {\r\n      if (jsbin.dropdownOpen) {\r\n        if ($(event.target).closest('.menu').length) {\r\n          ignoreUp = true;\r\n        }\r\n      }\r\n    }).bind('click mouseup', function (event) {\r\n      if (jsbin.dropdownOpen && !ignoreUp) {\r\n        if (!$(event.target).closest('.menu').length) {\r\n          closedropdown();\r\n          return false;\r\n        }\r\n      }\r\n      ignoreUp = false;\r\n    });\r\n\r\n    var fromClick = false;\r\n    var $dropdownLinks = $('.dropdownmenu a, .dropdownmenu .button').mouseup(function (e) {\r\n      if (e.target.nodeName === 'INPUT') {\r\n        return;\r\n      }\r\n\r\n      setTimeout(closedropdown, 0);\r\n      analytics.selectMenu(this.getAttribute('data-label') || this.hash.substring(1) || this.href);\r\n      if (!fromClick) {\r\n        if (this.hostname === window.location.hostname) {\r\n          if ($(this).triggerHandler('click') !== false) {\r\n            window.location = this.href;\r\n          }\r\n        } else {\r\n          if (this.getAttribute('target')) {\r\n            window.open(this.href);\r\n          } else {\r\n            window.location = this.href;\r\n          }\r\n        }\r\n      }\r\n      fromClick = false;\r\n    }).mouseover(function () {\r\n      $dropdownLinks.removeClass('hover');\r\n      $(this).addClass('hover');\r\n    }).mousedown(function (e) {\r\n      if (e.target.nodeName === 'INPUT') {\r\n        return;\r\n      }\r\n      fromClick = true;\r\n    });\r\n\r\n  }\r\n\r\n  return chrome.dropdowns = {\r\n    opendropdown,\r\n    closedropdown,\r\n    load\r\n  }\r\n});\ndefine('skylark-jsbin-chrome/hideOpen',[\r\n\t\"./chrome\",\r\n  \"./dropdowns\"\r\n],function(jsbin,dropdowns){\r\n  //moved from chrome/esc.js\r\n  function hideOpen() {\r\n    if (jsbin.infocardVisible) {\r\n      $('#infocard').removeClass('open');\r\n     jsbin.infocardVisible = false;\r\n    }\r\n    if (jsbin.sideNavVisible) {\r\n      $body.removeClass('show-nav');\r\n      jsbin.sideNavVisible = false;\r\n    }\r\n    if (jsbin.urlHelpVisible) {\r\n      jsbin.$body.removeClass('urlHelp');\r\n      jsbin.urlHelpVisible = false;\r\n      analytics.closeMenu('help');\r\n    } else if (jsbin.keyboardHelpVisible) {\r\n      jsbin.$body.removeClass('keyboardHelp');\r\n      jsbin.keyboardHelpVisible = false;\r\n      analytics.closeMenu('keyboardHelp');\r\n    } else if (jsbin.dropdownOpen) {\r\n      dropdowns.closedropdown();\r\n    } else if (jsbin.loginVisible) {\r\n      $('#login').hide();\r\n      analytics.closeMenu('login');\r\n      jsbin.loginVisible = false;\r\n    }\r\n  }\r\n  return chrome.hideOpen = hideOpen;\r\n});\ndefine('skylark-jsbin-chrome/main',[\r\n\t\"./chrome\",\r\n\t\"./analytics\",\r\n\t\"./dropdowns\",\r\n\t\"./hideOpen\"\r\n],function(chrome){\r\n\treturn chrome;\r\n});\ndefine('skylark-jsbin-chrome', ['skylark-jsbin-chrome/main'], function (main) { return main; });\n\n"]}